<!DOCTYPE html>
<html lang="pt-BR">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Declaraรงรฃo Anhanguera</title>
ย ยย
ย ย <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

ย ย <style>
ย ย ย ย /* --- ESTILOS GERAIS --- */
ย ย ย ย body {
ย ย ย ย ย ย margin: 0;
ย ย ย ย ย ย padding: 20px;
ย ย ย ย ย ย background-color: #333; /* Fundo escuro para destacar a folha */
ย ย ย ย ย ย font-family: Arial, Helvetica, sans-serif;
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย flex-direction: column;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย overflow-x: auto; /* Permite rolagem lateral */
ย ย ย ย }

ย ย ย ย /* --- BOTรO --- */
ย ย ย ย .btn-container {
ย ย ย ย ย ย position: fixed; top: 0; left: 0; width: 100%;
ย ย ย ย ย ย background: rgba(0,0,0,0.9); padding: 15px;
ย ย ย ย ย ย text-align: center; z-index: 999;
ย ย ย ย }
ย ย ย ย .btn-download {
ย ย ย ย ย ย background-color: #ff6600; /* Laranja Anhanguera */
ย ย ย ย ย ย color: white; border: none;
ย ย ย ย ย ย padding: 12px 30px; font-size: 16px; border-radius: 5px;
ย ย ย ย ย ย cursor: pointer; font-weight: bold;
ย ย ย ย }
ย ย ย ย .btn-download:disabled { background-color: #555; cursor: wait; }
ย ย ย ย .spacer { height: 80px; width: 100%; }

ย ย ย ย /* --- FOLHA A4 --- */
ย ย ย ย .page {
ย ย ย ย ย ย position: relative;
ย ย ย ย ย ย /* Tamanho fixo A4 */
ย ย ย ย ย ย width: 210mm;ย
ย ย ย ย ย ย min-height: 297mm;
ย ย ย ย ย ย background-color: white;
ย ย ย ย ย ย box-shadow: 0 0 20px rgba(0,0,0,0.5);
ย ย ย ย ย ย overflow: hidden;ย
ย ย ย ย ย ย margin: 0 auto;
ย ย ย ย }

ย ย ย ย /* --- FUNDO --- */
ย ย ย ย .background-layer {
ย ย ย ย ย ย position: absolute; top: 0; left: 0;
ย ย ย ย ย ย width: 100%; height: 100%; z-index: 0;
ย ย ย ย }
ย ย ย ย .background-layer img {
ย ย ย ย ย ย width: 100%; height: 100%; object-fit: cover;
ย ย ย ย }

ย ย ย ย /* --- TEXTO --- */
ย ย ย ย .text-layer {
ย ย ย ย ย ย position: relative;
ย ย ย ย ย ย z-index: 1;
ย ย ย ย ย ย /* Ajustes de margem da imagem original */
ย ย ย ย ย ย padding-top: 80mm;ย
ย ย ย ย ย ย padding-left: 25mm;
ย ย ย ย ย ย padding-right: 25mm;
ย ย ย ย ย ย color: #000;
ย ย ย ย }

ย ย ย ย /* --- FORMATAรรO --- */
ย ย ย ย h1.titulo {
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย font-size: 24px;
ย ย ย ย ย ย font-weight: bold;
ย ย ย ย ย ย text-transform: uppercase;
ย ย ย ย ย ย margin-bottom: 40px;
ย ย ย ย ย ย color: #333;
ย ย ย ย }
ย ย ย ย .titulo-container { text-align: center; margin-bottom: 40px; }

ย ย ย ย p.corpo-texto {
ย ย ย ย ย ย font-size: 16px;
ย ย ย ย ย ย line-height: 1.6;
ย ย ย ย ย ย text-align: justify;
ย ย ย ย ย ย margin-bottom: 130px;
ย ย ย ย }

ย ย ย ย .data-local {
ย ย ย ย ย ย text-align: right;ย
ย ย ย ย ย ย font-size: 16px;
ย ย ย ย ย ย margin-bottom: 190px;
ย ย ย ย }

ย ย ย ย .assinatura {
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย font-size: 14px;
ย ย ย ย ย ย font-weight: bold;
ย ย ย ย }
ย ย </style>
</head>
<body>

ย ย <div class="btn-container">
ย ย ย ย <button class="btn-download" onclick="baixarPDF()">
ย ย ย ย ย ย ๐ฅ BAIXAR DECLARAรรO (ANHANGUERA)
ย ย ย ย </button>
ย ย </div>
ย ย <div class="spacer"></div>

ย ย <div class="page" id="conteudo-para-pdf">
ย ย ย ยย
ย ย ย ย <div class="background-layer">
ย ย ย ย ย ย <img src="fundo.jpg" alt="Fundo"> </div>

ย ย ย ย <div class="text-layer">
ย ย ย ย ย ยย
ย ย ย ย ย ย <div class="titulo-container">
ย ย ย ย ย ย ย ย <h1 class="titulo">DECLARAรรO</h1>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <p class="corpo-texto">
ย ย ย ย ย ย ย ย Declaro, para os devidos fins, que <strong id="nome-aluno-anhanguera">CHERLAU DA SILVA PRADO FILHO</strong>,
ย ย ย ย ย ย ย ย <strong>MATRรCULA: RA00220527</strong> รฉ aluno(a) matriculado(a) no curso de <strong>Educaรงรฃo Fรญsica</strong>
ย ย ย ย ย ย ย ย <strong id="dynamic-semester"></strong>, no Polo da Anhanguera Educacional de <strong>Sรฃo Paulo/SP</strong>.
ย ย ย ย ย ย </p>

ย ย ย ย ย ย <div class="data-local" id="dynamic-date">
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="assinatura">
ย ย ย ย ย ย ย ย Auristela Gelocha โ Secretรกria Acadรชmica do Polo
ย ย ย ย ย ย </div>

ย ย ย ย </div>
ย ย </div>

ย ย <script>
ย ย ย ย // 1. PREENCHIMENTO AUTOMรTICO
ย ย ย ย (function autoUpdate() {
ย ย ย ย ย ย const urlParams = new URLSearchParams(window.location.search);
ย ย ย ย ย ย const nomeNaUrl = urlParams.get('nome');

ย ย ย ย ย ย if (nomeNaUrl) {
ย ย ย ย ย ย ย ย document.getElementById("nome-aluno-anhanguera").innerText = nomeNaUrl.toUpperCase();
ย ย ย ย ย ย }

ย ย ย ย ย ย const now = new Date();
ย ย ย ย ย ย const day = now.getDate();
ย ย ย ย ย ย const year = now.getFullYear();
ย ย ย ย ย ย const monthIndex = now.getMonth();ย
ย ย ย ย ย ยย
ย ย ย ย ย ย const months = [
ย ย ย ย ย ย ย ย "janeiro", "fevereiro", "marรงo", "abril", "maio", "junho",
ย ย ย ย ย ย ย ย "julho", "agosto", "setembro", "outubro", "novembro", "dezembro"
ย ย ย ย ย ย ];

ย ย ย ย ย ย let semesterText = (monthIndex < 6) ? "1ยบ semestre" : "2ยบ semestre";
ย ย ย ย ย ย const fullDateText = `Sรฃo Paulo, ${day} de ${months[monthIndex]} de ${year}.`;

ย ย ย ย ย ย document.getElementById("dynamic-semester").innerText = semesterText;
ย ย ย ย ย ย document.getElementById("dynamic-date").innerText = fullDateText;
ย ย ย ย })();

ย ย ย ย // 2. FUNรรO OTIMIZADA PARA CELULAR (ESCALA CORRETA)
ย ย ย ย function baixarPDF() {
ย ย ย ย ย ย const btn = document.querySelector('.btn-download');
ย ย ย ย ย ย const textoOriginal = btn.innerText;
ย ย ย ย ย ย btn.innerText = "โณ GERANDO PDF...";
ย ย ย ย ย ย btn.disabled = true;

ย ย ย ย ย ย const elemento = document.getElementById('conteudo-para-pdf');
ย ย ย ย ย ย window.scrollTo(0,0);

ย ย ย ย ย ย const options = {
ย ย ย ย ย ย ย ย margin:ย ย ย ย0,
ย ย ย ย ย ย ย ย filename:ย ย ย'declaracao-anhanguera.pdf',
ย ย ย ย ย ย ย ย image:ย ย ย ย { type: 'jpeg', quality: 0.98 },
ย ย ย ย ย ย ย ย html2canvas:ย {ย
ย ย ย ย ย ย ย ย ย ย scale: 2,ย ย ย ย
ย ย ย ย ย ย ย ย ย ย useCORS: true,ยย
ย ย ย ย ย ย ย ย ย ย scrollY: 0,
ย ย ย ย ย ย ย ย ย ย // O SEGREDO: windowWidth 800 corrige o tamanho no celular
ย ย ย ย ย ย ย ย ย ย windowWidth: 800ย
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย jsPDF:ย ย ย ย {ย
ย ย ย ย ย ย ย ย ย ย unit: 'mm',ย
ย ย ย ย ย ย ย ย ย ย format: 'a4',ย
ย ย ย ย ย ย ย ย ย ย orientation: 'portrait',
ย ย ย ย ย ย ย ย ย ย compress: trueย
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย };

ย ย ย ย ย ย html2pdf().set(options).from(elemento).save()
ย ย ย ย ย ย .then(() => {
ย ย ย ย ย ย ย ย btn.innerText = textoOriginal;
ย ย ย ย ย ย ย ย btn.disabled = false;
ย ย ย ย ย ย })
ย ย ย ย ย ย .catch(err => {
ย ย ย ย ย ย ย ย console.error(err);
ย ย ย ย ย ย ย ย alert("Erro ao gerar PDF.");
ย ย ย ย ย ย ย ย btn.innerText = textoOriginal;
ย ย ย ย ย ย ย ย btn.disabled = false;
ย ย ย ย ย ย });
ย ย ย ย }
ย ย </script>
</body>
</html>
